<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二分法猜数游戏 - 小学信息课</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5', // 主色调：紫色
                        secondary: '#EC4899', // 辅助色：粉色
                        accent: '#06B6D4', // 强调色：青色
                        success: '#10B981', // 成功色：绿色
                        warning: '#F59E0B', // 警告色：橙色
                        danger: '#EF4444', // 危险色：红色
                        light: '#F3F4F6', // 浅色背景
                        dark: '#1F2937', // 深色文字
                    },
                    fontFamily: {
                        comic: ['"Comic Sans MS"', '"Marker Felt"', 'cursive'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            }
            .animate-bounce-slow {
                animation: bounce 2s infinite;
            }
            .animate-pulse-slow {
                animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }
            .range-bar {
                height: 24px;
                border-radius: 12px;
                background: linear-gradient(90deg, #4F46E5, #EC4899);
                position: relative;
            }
            .range-marker {
                position: absolute;
                top: -10px;
                width: 4px;
                height: 44px;
                background: #1F2937;
                transform: translateX(-50%);
            }
            .range-marker::after {
                content: '';
                position: absolute;
                bottom: -16px;
                left: 50%;
                transform: translateX(-50%);
                border-width: 8px;
                border-style: solid;
                border-color: #1F2937 transparent transparent transparent;
            }
            .timeline-marker {
                transition: left 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), 
                            background-color 0.4s ease,
                            transform 0.4s ease;
            }
            .timeline-marker.active {
                transform: translateX(-50%) scale(1.2);
                background-color: #EC4899;
            }
            
            /* 3D翻页效果 */
            .dictionary-container {
                perspective: 1500px;
                position: relative;
                height: 200px;
                width: 100%;
                max-width: 300px;
                margin: 0 auto;
            }
            .dictionary-book {
                width: 100%;
                height: 100%;
                position: relative;
                transform-style: preserve-3d;
                transition: transform 0.5s ease;
            }
            .dictionary-page {
                position: absolute;
                width: 100%;
                height: 100%;
                backface-visibility: hidden;
                transform-origin: left center;
                transition: transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
                border-radius: 0 10px 10px 0;
                box-shadow: 0 4px 10px rgba(0,0,0,0.1);
                display: flex;
                align-items: center;
                justify-content: center;
                background: white;
                border: 1px solid #e5e7eb;
            }
            .dictionary-page.front-cover {
                background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
                color: white;
                border-radius: 5px 10px 10px 5px;
                z-index: 100;
            }
            .dictionary-page.page-1 { transform: rotateY(0deg); z-index: 50; }
            .dictionary-page.page-2 { transform: rotateY(0deg); z-index: 40; }
            .dictionary-page.page-3 { transform: rotateY(0deg); z-index: 30; }
            .dictionary-page.page-4 { transform: rotateY(0deg); z-index: 20; }
            
            .page-flip .page-1 { transform: rotateY(-180deg); }
            .page-flip .page-2 { transform: rotateY(-180deg); }
            .page-flip .page-3 { transform: rotateY(-180deg); }
            
            .dictionary-page::before {
                content: '';
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                background: linear-gradient(to right, rgba(0,0,0,0.03) 0%, rgba(0,0,0,0) 100%);
                pointer-events: none;
            }
            
            /* 监控范围高亮效果 */
            .time-range-highlight {
                position: absolute;
                top: 0;
                height: 100%;
                background: rgba(79, 70, 229, 0.1);
                border-radius: 999px;
                transition: left 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), 
                            width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
                z-index: 1;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-purple-50 min-h-screen font-comic text-dark">
    <!-- 页面头部 -->
    <header class="bg-gradient-to-r from-primary to-secondary text-white py-6 px-4 shadow-lg">
        <div class="container mx-auto text-center">
            <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-shadow mb-2 animate-pulse-slow">
                <i class="fa fa-search text-accent"></i> 二分法猜数游戏
            </h1>
            <p class="text-[clamp(1rem,2vw,1.25rem)] opacity-90 max-w-2xl mx-auto">
                探索高效查找的秘密，让猜数变得又快又准！
            </p>
        </div>
    </header>

    <!-- 导航栏 -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto">
            <ul class="flex flex-wrap justify-center py-3 px-2 gap-2 md:gap-4">
                <li><a href="#what-is" class="px-4 py-2 rounded-full hover:bg-primary/10 transition-colors duration-300 active">什么是二分法</a></li>
                <li><a href="#how-it-works" class="px-4 py-2 rounded-full hover:bg-primary/10 transition-colors duration-300">二分法原理</a></li>
                <li><a href="#game" class="px-4 py-2 rounded-full hover:bg-primary/10 transition-colors duration-300">猜数游戏</a></li>
                <li><a href="#applications" class="px-4 py-2 rounded-full hover:bg-primary/10 transition-colors duration-300">生活应用</a></li>
            </ul>
        </div>
    </nav>

    <main class="container mx-auto py-8 px-4">
        <!-- 什么是二分法 -->
        <section id="what-is" class="mb-16 bg-white rounded-2xl shadow-xl p-6 md:p-8 transform transition-all duration-500 hover:shadow-2xl">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center mr-4">
                    <i class="fa fa-question-circle text-primary text-2xl"></i>
                </div>
                <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-primary">什么是二分法？</h2>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <p class="text-lg mb-4 leading-relaxed">
                        二分法是一种<span class="font-bold text-secondary">高效的搜索算法</span>，就像我们在猜数字游戏中使用的"聪明办法"！
                    </p>
                    <p class="text-lg mb-4 leading-relaxed">
                        它适用于在<span class="font-bold text-accent">有序数据</span>中查找目标，通过不断将查找范围分成两半，快速缩小范围，最终找到答案。
                    </p>
                    <div class="bg-light rounded-xl p-4 border-l-4 border-primary">
                        <p class="font-bold mb-2">二分法的核心思想：</p>
                        <ul class="list-disc list-inside space-y-2">
                            <li>将查找范围<span class="text-primary font-bold">一分为二</span></li>
                            <li>比较中间值与目标值</li>
                            <li>保留目标值所在的那一半</li>
                            <li><span class="text-secondary font-bold">重复</span>以上步骤，直到找到目标</li>
                        </ul>
                    </div>
                </div>
                
                <div class="bg-gradient-to-br from-primary/5 to-secondary/5 rounded-2xl p-6 flex flex-col items-center justify-center">
                    <div class="w-full mb-6">
                        <div class="range-bar mb-8">
                            <div class="range-marker" style="left: 0%">
                                <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">1</span>
                            </div>
                            <div class="range-marker" style="left: 50%">
                                <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-primary text-white text-xs px-2 py-1 rounded">中间值</span>
                            </div>
                            <div class="range-marker" style="left: 100%">
                                <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">100</span>
                            </div>
                        </div>
                        <div class="flex justify-around items-center">
                            <div class="text-center">
                                <div class="w-20 h-20 rounded-full bg-primary/20 flex items-center justify-center mx-auto mb-2">
                                    <span class="text-primary font-bold text-xl">1</span>
                                </div>
                                <p class="text-sm">开始</p>
                            </div>
                            <i class="fa fa-arrow-right text-accent text-2xl"></i>
                            <div class="text-center">
                                <div class="w-20 h-20 rounded-full bg-secondary/20 flex items-center justify-center mx-auto mb-2">
                                    <span class="text-secondary font-bold text-xl">50</span>
                                </div>
                                <p class="text-sm">猜中间值</p>
                            </div>
                            <i class="fa fa-arrow-right text-accent text-2xl"></i>
                            <div class="text-center">
                                <div class="w-20 h-20 rounded-full bg-success/20 flex items-center justify-center mx-auto mb-2">
                                    <span class="text-success font-bold text-xl">?</span>
                                </div>
                                <p class="text-sm">找到答案</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 二分法原理 -->
        <section id="how-it-works" class="mb-16 bg-white rounded-2xl shadow-xl p-6 md:p-8 transform transition-all duration-500 hover:shadow-2xl">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-accent/20 rounded-full flex items-center justify-center mr-4">
                    <i class="fa fa-cogs text-accent text-2xl"></i>
                </div>
                <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-accent">二分法的工作原理</h2>
            </div>
            
            <div class="mb-8">
                <p class="text-lg mb-6 text-center">让我们通过一个具体例子来理解二分法的工作过程：猜数字（目标数：58）</p>
                
                <div class="bg-light rounded-2xl p-6 mb-8">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 pb-4 border-b border-gray-200">
                        <div class="mb-4 md:mb-0">
                            <h3 class="font-bold text-xl text-primary mb-2">第1次猜测</h3>
                            <p>范围：1-100，猜中间值 <span class="font-bold text-2xl text-secondary">50</span></p>
                        </div>
                        <div class="flex items-center">
                            <span class="bg-warning/20 text-warning px-4 py-2 rounded-full font-bold">猜小了！</span>
                        </div>
                    </div>
                    <div class="range-bar mb-4">
                        <div class="range-marker" style="left: 0%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">1</span>
                        </div>
                        <div class="range-marker" style="left: 50%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-warning text-white text-xs px-2 py-1 rounded">50</span>
                        </div>
                        <div class="range-marker" style="left: 100%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">100</span>
                        </div>
                        <div class="absolute top-0 left-[50%] w-[50%] h-full bg-success/20 rounded-r-12"></div>
                    </div>
                    <p class="text-center text-success font-bold">新范围：51-100</p>
                </div>
                
                <div class="bg-light rounded-2xl p-6 mb-8">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 pb-4 border-b border-gray-200">
                        <div class="mb-4 md:mb-0">
                            <h3 class="font-bold text-xl text-primary mb-2">第2次猜测</h3>
                            <p>范围：51-100，猜中间值 <span class="font-bold text-2xl text-secondary">75</span></p>
                        </div>
                        <div class="flex items-center">
                            <span class="bg-danger/20 text-danger px-4 py-2 rounded-full font-bold">猜大了！</span>
                        </div>
                    </div>
                    <div class="range-bar mb-4">
                        <div class="range-marker" style="left: 50%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">51</span>
                        </div>
                        <div class="range-marker" style="left: 75%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-danger text-white text-xs px-2 py-1 rounded">75</span>
                        </div>
                        <div class="range-marker" style="left: 100%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">100</span>
                        </div>
                        <div class="absolute top-0 left-[50%] w-[25%] h-full bg-success/20 rounded-r-12"></div>
                    </div>
                    <p class="text-center text-success font-bold">新范围：51-74</p>
                </div>
                
                <div class="bg-light rounded-2xl p-6 mb-8">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 pb-4 border-b border-gray-200">
                        <div class="mb-4 md:mb-0">
                            <h3 class="font-bold text-xl text-primary mb-2">第3次猜测</h3>
                            <p>范围：51-74，猜中间值 <span class="font-bold text-2xl text-secondary">62</span></p>
                        </div>
                        <div class="flex items-center">
                            <span class="bg-danger/20 text-danger px-4 py-2 rounded-full font-bold">猜大了！</span>
                        </div>
                    </div>
                    <div class="range-bar mb-4">
                        <div class="range-marker" style="left: 50%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">51</span>
                        </div>
                        <div class="range-marker" style="left: 62%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-danger text-white text-xs px-2 py-1 rounded">62</span>
                        </div>
                        <div class="range-marker" style="left: 75%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">74</span>
                        </div>
                        <div class="absolute top-0 left-[50%] w-[12%] h-full bg-success/20 rounded-r-12"></div>
                    </div>
                    <p class="text-center text-success font-bold">新范围：51-61</p>
                </div>
                
                <div class="bg-light rounded-2xl p-6">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-4 pb-4 border-b border-gray-200">
                        <div class="mb-4 md:mb-0">
                            <h3 class="font-bold text-xl text-primary mb-2">第4次猜测</h3>
                            <p>范围：51-61，猜中间值 <span class="font-bold text-2xl text-secondary">56</span></p>
                        </div>
                        <div class="flex items-center">
                            <span class="bg-warning/20 text-warning px-4 py-2 rounded-full font-bold">猜小了！</span>
                        </div>
                    </div>
                    <div class="range-bar mb-4">
                        <div class="range-marker" style="left: 50%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">51</span>
                        </div>
                        <div class="range-marker" style="left: 55%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-warning text-white text-xs px-2 py-1 rounded">56</span>
                        </div>
                        <div class="range-marker" style="left: 60%">
                            <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded">61</span>
                        </div>
                        <div class="absolute top-0 left-[55%] w-[5%] h-full bg-success/20 rounded-r-12"></div>
                    </div>
                    <p class="text-center text-success font-bold">新范围：57-61</p>
                </div>
            </div>
            
            <div class="bg-success/10 rounded-xl p-6 mt-8 border-l-4 border-success">
                <h3 class="font-bold text-xl mb-2 text-success">算法步骤总结：</h3>
                <ol class="list-decimal list-inside space-y-2 text-lg">
                    <li>取中间位置的数与目标数比较，如果相等，则查找成功</li>
                    <li>如果不相等，以中间数为分界，分成两部分</li>
                    <li>中间数大于目标数 → 查找前半部分</li>
                    <li>中间数小于目标数 → 查找后半部分</li>
                    <li>重复以上步骤，直到找到目标数</li>
                </ol>
            </div>
        </section>

        <!-- 猜数游戏 -->
        <section id="game" class="mb-16 bg-white rounded-2xl shadow-xl p-6 md:p-8 transform transition-all duration-500 hover:shadow-2xl">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-secondary/20 rounded-full flex items-center justify-center mr-4">
                    <i class="fa fa-gamepad text-secondary text-2xl"></i>
                </div>
                <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-secondary">猜数游戏</h2>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- 游戏设置 -->
                <div class="md:col-span-1">
                    <div class="bg-light rounded-2xl p-6 h-full">
                        <h3 class="font-bold text-xl mb-4 text-secondary">游戏设置</h3>
                        
                        <div class="mb-6">
                            <label class="block mb-2 font-bold">数值范围</label>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="radio" name="range" value="100" checked class="mr-2 accent-secondary">
                                    <span>1 - 100（简单）</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="range" value="1000" class="mr-2 accent-secondary">
                                    <span>1 - 1000（中等）</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="range" value="10000" class="mr-2 accent-secondary">
                                    <span>1 - 10000（困难）</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <button id="start-game" class="w-full bg-gradient-to-r from-secondary to-primary text-white font-bold py-3 px-4 rounded-full shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                                <i class="fa fa-play mr-2"></i> 开始游戏
                            </button>
                        </div>
                        
                        <div class="bg-white rounded-xl p-4 shadow-inner">
                            <h4 class="font-bold mb-2">游戏统计</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span>当前轮次：</span>
                                    <span id="game-round" class="font-bold text-primary">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>猜测次数：</span>
                                    <span id="guess-count" class="font-bold text-primary">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>最快猜对：</span>
                                    <span id="best-score" class="font-bold text-success">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 游戏区域 -->
                <div class="md:col-span-2">
                    <div class="bg-gradient-to-br from-primary/5 to-secondary/5 rounded-2xl p-6 h-full flex flex-col">
                        <h3 class="font-bold text-xl mb-4 text-center">开始猜数吧！</h3>
                        
                        <div id="game-status" class="text-center mb-6 py-4 rounded-xl bg-light">
                            <p class="text-lg">点击"开始游戏"按钮，系统会随机生成一个目标数</p>
                        </div>
                        
                        <div class="mb-6">
                            <label for="guess-input" class="block mb-2 font-bold text-center">请输入你猜的数字：</label>
                            <div class="flex">
                                <input type="number" id="guess-input" class="flex-1 px-4 py-3 border-2 border-primary rounded-l-full focus:outline-none focus:border-secondary focus:ring-2 focus:ring-secondary/30" placeholder="输入数字" disabled>
                                <button id="auto-guess" class="bg-accent text-white font-bold py-3 px-4 border-2 border-accent border-l-0 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                    <i class="fa fa-magic mr-1"></i> 猜中间
                                </button>
                                <button id="guess-button" class="bg-secondary text-white font-bold py-3 px-6 rounded-r-full shadow-md hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                    <i class="fa fa-check mr-2"></i> 猜一猜
                                </button>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <h4 class="font-bold mb-3 text-center">数值范围</h4>
                            <div class="range-bar mb-4" id="game-range-bar">
                                <div class="range-marker" style="left: 0%">
                                    <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded" id="range-min">1</span>
                                </div>
                                <div class="range-marker" style="left: 100%">
                                    <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-dark text-white text-xs px-2 py-1 rounded" id="range-max">100</span>
                                </div>
                            </div>
                            <p class="text-center font-bold" id="current-range">1 - 100</p>
                        </div>
                        
                        <div class="mt-auto">
                            <h4 class="font-bold mb-3 text-center">猜测记录</h4>
                            <div id="guess-history" class="bg-white rounded-xl p-4 max-h-60 overflow-y-auto shadow-inner">
                                <p class="text-center text-gray-500 italic">暂无猜测记录</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 效率对比图表 -->
            <div class="mt-10">
                <h3 class="font-bold text-xl mb-6 text-center text-primary">二分法 vs 顺序查找</h3>
                <div class="bg-light rounded-2xl p-6">
                    <canvas id="efficiency-chart" height="300"></canvas>
                </div>
                <p class="text-center mt-4 text-gray-600">
                    可以看到，随着数值范围的增大，二分法的效率优势越来越明显！
                </p>
            </div>
        </section>

       
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-8 px-4">
        <div class="container mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <h3 class="text-xl font-bold mb-2">二分法猜数游戏</h3>
                    <p class="opacity-75">小学信息科技课程教学资源</p>
                </div>
                
                <div class="flex space-x-4">
                    <a href="#" class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary transition-colors duration-300">
                        <i class="fa fa-question-circle"></i>
                    </a>
                    <a href="#" class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary transition-colors duration-300">
                        <i class="fa fa-book"></i>
                    </a>
                    <a href="#" class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary transition-colors duration-300">
                        <i class="fa fa-gamepad"></i>
                    </a>
                </div>
            </div>
            
            <div class="border-t border-white/20 mt-6 pt-6 text-center opacity-75">
                <p>© 2025 小学信息科技课程. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <!-- 成功弹窗 -->
    <div id="success-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
            <div class="text-center">
                <div class="w-20 h-20 bg-success/20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fa fa-trophy text-success text-3xl"></i>
                </div>
                <h3 class="font-bold text-2xl mb-2 text-success">恭喜你！</h3>
                <p class="text-lg mb-6" id="modal-message">你猜对了！</p>
                <div class="flex justify-center space-x-4">
                    <button id="play-again" class="bg-primary text-white font-bold py-2 px-6 rounded-full shadow-md hover:shadow-lg transition-all duration-300">
                        再玩一次
                    </button>
                    <button id="close-modal" class="bg-gray-200 text-dark font-bold py-2 px-6 rounded-full shadow-md hover:shadow-lg transition-all duration-300">
                        关闭
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 全局变量
        let targetNumber = 0;
        let minRange = 1;
        let maxRange = 100;
        let guessCount = 0;
        let gameRound = 0;
        let bestScore = localStorage.getItem('binarySearchBestScore') || null;
        
        // DOM元素
        const startGameBtn = document.getElementById('start-game');
        const guessButton = document.getElementById('guess-button');
        const autoGuessBtn = document.getElementById('auto-guess');
        const guessInput = document.getElementById('guess-input');
        const gameStatus = document.getElementById('game-status');
        const currentRange = document.getElementById('current-range');
        const rangeMin = document.getElementById('range-min');
        const rangeMax = document.getElementById('range-max');
        const gameRangeBar = document.getElementById('game-range-bar');
        const guessHistory = document.getElementById('guess-history');
        const gameRoundElement = document.getElementById('game-round');
        const guessCountElement = document.getElementById('guess-count');
        const bestScoreElement = document.getElementById('best-score');
        const successModal = document.getElementById('success-modal');
        const modalContent = document.getElementById('modal-content');
        const modalMessage = document.getElementById('modal-message');
        const playAgainBtn = document.getElementById('play-again');
        const closeModalBtn = document.getElementById('close-modal');
        
        // 查监控演示元素
        const timelineMarker = document.getElementById('timeline-marker');
        const timelineText = document.getElementById('timeline-text');
        const checkEarlyBtn = document.getElementById('check-early');
        const checkLateBtn = document.getElementById('check-late');
        const resetTimelineBtn = document.getElementById('reset-timeline');
        const timeHighlight = document.getElementById('time-highlight');
        const timelineSteps = document.getElementById('timeline-steps');
        
        // 查字典演示元素
        const dictionaryBook = document.getElementById('dictionary-book');
        const dictNextBtn = document.getElementById('dict-next-btn');
        const dictPrevBtn = document.getElementById('dict-prev-btn');
        const resetDictBtn = document.getElementById('reset-dict');
        const dictSteps = document.getElementById('dict-steps');
        
        // 监控时间线状态
        let timelineState = 0; // 0:初始 1:后半段 2:前半段 3:最终定位
        // 字典翻页状态
        let dictPage = 0; // 0:封面 1:第一页 2:第二页 3:第三页 4:目标页
        
        // 初始化最佳分数显示
        if (bestScore) {
            bestScoreElement.textContent = bestScore + ' 次';
        }
        
        // 初始化效率对比图表
        const ctx = document.getElementById('efficiency-chart').getContext('2d');
        const efficiencyChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['1-100', '1-1000', '1-10000', '1-100000', '1-1000000'],
                datasets: [
                    {
                        label: '二分法最多猜测次数',
                        data: [7, 10, 14, 17, 20],
                        backgroundColor: 'rgba(79, 70, 229, 0.7)',
                        borderColor: 'rgba(79, 70, 229, 1)',
                        borderWidth: 1
                    },
                    {
                        label: '顺序查找最多猜测次数',
                        data: [100, 1000, 10000, 100000, 1000000],
                        backgroundColor: 'rgba(236, 72, 153, 0.7)',
                        borderColor: 'rgba(236, 72, 153, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        type: 'logarithmic',
                        title: {
                            display: true,
                            text: '猜测次数（对数刻度）'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: '数值范围'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.raw + ' 次';
                            }
                        }
                    }
                }
            }
        });
        
        // 开始游戏
        startGameBtn.addEventListener('click', function() {
            // 获取选中的数值范围
            const rangeOption = document.querySelector('input[name="range"]:checked').value;
            switch(rangeOption) {
                case '100':
                    minRange = 1;
                    maxRange = 100;
                    break;
                case '1000':
                    minRange = 1;
                    maxRange = 1000;
                    break;
                case '10000':
                    minRange = 1;
                    maxRange = 10000;
                    break;
            }
            
            // 生成随机目标数
            targetNumber = Math.floor(Math.random() * (maxRange - minRange + 1)) + minRange;
            
            // 重置游戏状态
            guessCount = 0;
            gameRound++;
            guessHistory.innerHTML = '<p class="text-center text-gray-500 italic">暂无猜测记录</p>';
            
            // 更新UI
            gameRoundElement.textContent = gameRound;
            guessCountElement.textContent = guessCount;
            currentRange.textContent = `${minRange} - ${maxRange}`;
            rangeMin.textContent = minRange;
            rangeMax.textContent = maxRange;
            gameStatus.innerHTML = `<p class="text-lg text-success">游戏开始！系统已生成一个 ${minRange} 到 ${maxRange} 之间的数字</p>`;
            
            // 启用输入和按钮
            guessInput.disabled = false;
            guessButton.disabled = false;
            autoGuessBtn.disabled = false;
            guessInput.focus();
            
            // 更新范围条
            updateRangeBar();
        });
        
        // 自动猜中间值按钮
        autoGuessBtn.addEventListener('click', function() {
            const middle = Math.floor((minRange + maxRange) / 2);
            guessInput.value = middle;
            guessInput.focus();
        });
        
        // 猜测按钮点击事件
        guessButton.addEventListener('click', function() {
            checkGuess();
        });
        
        // 输入框回车事件
        guessInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                checkGuess();
            }
        });
        
        // 检查猜测结果
        function checkGuess() {
            const userGuess = parseInt(guessInput.value);
            
            // 验证输入
            if (isNaN(userGuess) || userGuess < minRange || userGuess > maxRange) {
                gameStatus.innerHTML = `<p class="text-lg text-danger">请输入 ${minRange} 到 ${maxRange} 之间的有效数字！</p>`;
                guessInput.value = '';
                guessInput.focus();
                return;
            }
            
            // 增加猜测次数
            guessCount++;
            guessCountElement.textContent = guessCount;
            
            // 记录猜测历史
            addGuessHistory(userGuess);
            
            // 清空输入框
            guessInput.value = '';
            guessInput.focus();
            
            // 检查是否猜对
            if (userGuess === targetNumber) {
                // 猜对了
                gameStatus.innerHTML = `<p class="text-lg text-success">恭喜你！猜对了！</p>`;
                guessInput.disabled = true;
                guessButton.disabled = true;
                autoGuessBtn.disabled = true;
                
                // 更新最佳分数
                if (!bestScore || guessCount < bestScore) {
                    bestScore = guessCount;
                    localStorage.setItem('binarySearchBestScore', bestScore);
                    bestScoreElement.textContent = bestScore + ' 次';
                }
                
                // 显示成功弹窗
                modalMessage.textContent = `你猜对了！目标数就是 ${targetNumber}，共用了 ${guessCount} 次猜测！`;
                showSuccessModal();
                return;
            }
            
            // 没猜对，更新范围
            if (userGuess < targetNumber) {
                // 猜小了
                minRange = userGuess + 1;
                gameStatus.innerHTML = `<p class="text-lg text-warning">猜小了！再试试更大的数字</p>`;
            } else {
                // 猜大了
                maxRange = userGuess - 1;
                gameStatus.innerHTML = `<p class="text-lg text-danger">猜大了！再试试更小的数字</p>`;
            }
            
            // 更新UI
            currentRange.textContent = `${minRange} - ${maxRange}`;
            rangeMin.textContent = minRange;
            rangeMax.textContent = maxRange;
            
            // 更新范围条
            updateRangeBar();
        }
        
        // 添加猜测历史
        function addGuessHistory(guess) {
            const isTooLow = guess < targetNumber;
            const isTooHigh = guess > targetNumber;
            
            let historyItem = document.createElement('div');
            historyItem.className = 'flex justify-between items-center p-2 border-b border-gray-100 last:border-0';
            
            let guessText = document.createElement('span');
            guessText.textContent = `第 ${guessCount} 次：${guess}`;
            
            let resultText = document.createElement('span');
            if (isTooLow) {
                resultText.className = 'text-warning font-bold';
                resultText.textContent = '猜小了 ↗️';
            } else if (isTooHigh) {
                resultText.className = 'text-danger font-bold';
                resultText.textContent = '猜大了 ↘️';
            } else {
                resultText.className = 'text-success font-bold';
                resultText.textContent = '猜对了 ✅';
            }
            
            historyItem.appendChild(guessText);
            historyItem.appendChild(resultText);
            
            // 如果是第一条记录，清空提示文本
            if (guessCount === 1) {
                guessHistory.innerHTML = '';
            }
            
            // 添加到历史记录容器
            guessHistory.appendChild(historyItem);
            
            // 滚动到底部
            guessHistory.scrollTop = guessHistory.scrollHeight;
        }
        
        // 更新范围条
        function updateRangeBar() {
            // 清除现有标记
            const existingMarkers = gameRangeBar.querySelectorAll('.range-marker:not([style*="left: 0%"]):not([style*="left: 100%"])');
            existingMarkers.forEach(marker => marker.remove());
            
            // 计算中间位置
            const totalRange = parseInt(rangeMax.textContent) - parseInt(rangeMin.textContent);
            const currentGuess = parseInt(guessInput.value) || 0;
            
            if (currentGuess >= parseInt(rangeMin.textContent) && currentGuess <= parseInt(rangeMax.textContent)) {
                const percentage = ((currentGuess - parseInt(rangeMin.textContent)) / totalRange) * 100;
                
                const marker = document.createElement('div');
                marker.className = 'range-marker';
                marker.style.left = `${percentage}%`;
                
                const label = document.createElement('span');
                label.className = 'absolute -top-10 left-1/2 transform -translate-x-1/2 bg-secondary text-white text-xs px-2 py-1 rounded';
                label.textContent = currentGuess;
                
                marker.appendChild(label);
                gameRangeBar.appendChild(marker);
            }
        }
        
        // 显示成功弹窗
        function showSuccessModal() {
            successModal.classList.remove('hidden');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }
        
        // 关闭弹窗
        closeModalBtn.addEventListener('click', function() {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                successModal.classList.add('hidden');
            }, 300);
        });
        
        // 再玩一次
        playAgainBtn.addEventListener('click', function() {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                successModal.classList.add('hidden');
                startGameBtn.click();
            }, 300);
        });
        
        // 导航栏激活状态
        const navLinks = document.querySelectorAll('nav a');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                navLinks.forEach(l => l.classList.remove('bg-primary/10', 'text-primary', 'font-bold'));
                this.classList.add('bg-primary/10', 'text-primary', 'font-bold');
            });
        });
        
        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        // 查监控演示交互 - 增强版
        checkEarlyBtn.addEventListener('click', function() {
            timelineMarker.classList.add('active');
            
            if (timelineState === 0) {
                // 第一步：看后半段
                timelineMarker.style.left = '75%';
                timelineText.textContent = '快递还在，看后半段：14:00-20:00，中间是17:00';
                timeHighlight.style.left = '50%';
                timeHighlight.style.width = '50%';
                timelineSteps.textContent = '步骤：继续缩小范围，查看17:00的监控';
                timelineState = 1;
            } else if (timelineState === 1) {
                // 第二步：最终定位
                timelineMarker.style.left = '87.5%';
                timelineText.textContent = '快递还在，看最后段：17:00-20:00，发现18:30被拿走！';
                timeHighlight.style.left = '75%';
                timeHighlight.style.width = '25%';
                timelineSteps.textContent = '步骤：找到目标时间点！共查找3次完成';
                timelineState = 3;
                checkEarlyBtn.disabled = true;
                checkLateBtn.disabled = true;
            }
            
            setTimeout(() => {
                timelineMarker.classList.remove('active');
            }, 500);
        });
        
        checkLateBtn.addEventListener('click', function() {
            timelineMarker.classList.add('active');
            
            if (timelineState === 0) {
                // 第一步：看前半段
                timelineMarker.style.left = '25%';
                timelineText.textContent = '快递已丢，看前半段：8:00-14:00，中间是11:00';
                timeHighlight.style.left = '0%';
                timeHighlight.style.width = '50%';
                timelineSteps.textContent = '步骤：继续缩小范围，查看11:00的监控';
                timelineState = 2;
            } else if (timelineState === 2) {
                // 第二步：最终定位
                timelineMarker.style.left = '12.5%';
                timelineText.textContent = '快递还在，看前半段：8:00-11:00，发现9:30被拿走！';
                timeHighlight.style.left = '0%';
                timeHighlight.style.width = '25%';
                timelineSteps.textContent = '步骤：找到目标时间点！共查找3次完成';
                timelineState = 3;
                checkEarlyBtn.disabled = true;
                checkLateBtn.disabled = true;
            }
            
            setTimeout(() => {
                timelineMarker.classList.remove('active');
            }, 500);
        });
        
        // 重置监控时间线
        resetTimelineBtn.addEventListener('click', function() {
            timelineMarker.style.left = '50%';
            timelineText.textContent = '先看中间时间点：14:00';
            timeHighlight.style.left = '0%';
            timeHighlight.style.width = '100%';
            timelineSteps.textContent = '步骤：点击按钮继续缩小范围';
            timelineState = 0;
            checkEarlyBtn.disabled = false;
            checkLateBtn.disabled = false;
        });
        
        // 查字典演示交互 - 3D翻页效果
        dictNextBtn.addEventListener('click', function() {
            dictPage++;
            
            if (dictPage === 1) {
                // 翻到第一页
                dictionaryBook.classList.add('page-flip');
                dictSteps.textContent = '步骤："程"在C开头，在前半部分，继续翻';
                dictPrevBtn.disabled = false;
            } else if (dictPage === 2) {
                // 翻到第二页
                dictSteps.textContent = '步骤："程"在G前，继续往前翻';
            } else if (dictPage === 3) {
                // 翻到第三页
                dictSteps.textContent = '步骤：找到C开头部分，接近目标了！';
            } else if (dictPage === 4) {
                // 翻到目标页
                dictSteps.textContent = '步骤：找到"程"字！共翻3次完成';
                dictNextBtn.disabled = true;
            }
            
            // 更新页面显示
            updateDictPages();
        });
        
        dictPrevBtn.addEventListener('click', function() {
            if (dictPage > 0) {
                dictPage--;
                
                if (dictPage === 0) {
                    // 回到封面
                    dictionaryBook.classList.remove('page-flip');
                    dictSteps.textContent = '步骤：点击下一页继续查找"程"字';
                    dictPrevBtn.disabled = true;
                } else if (dictPage === 1) {
                    dictSteps.textContent = '步骤："程"在C开头，在前半部分，继续翻';
                } else if (dictPage === 2) {
                    dictSteps.textContent = '步骤："程"在G前，继续往前翻';
                }
                
                dictNextBtn.disabled = false;
                updateDictPages();
            }
        });
        
        // 重置字典翻页
        resetDictBtn.addEventListener('click', function() {
            dictPage = 0;
            dictionaryBook.classList.remove('page-flip');
            dictSteps.textContent = '步骤：点击下一页继续查找"程"字';
            dictPrevBtn.disabled = true;
            dictNextBtn.disabled = false;
            updateDictPages();
        });
        
        // 更新字典页面显示
        function updateDictPages() {
            const pages = document.querySelectorAll('.dictionary-page');
            
            pages.forEach((page, index) => {
                if (index > dictPage && index <= 4) {
                    page.style.transform = 'rotateY(0deg)';
                } else if (index <= dictPage && index > 0) {
                    page.style.transform = 'rotateY(-180deg)';
                }
            });
        }
        
        // 初始化页面
        updateRangeBar();
    </script>
</body>
</html>
