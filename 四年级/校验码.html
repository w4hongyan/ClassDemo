<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ¡éªŒç å­¦ä¹ å¹³å° - å°å­¦ä¿¡æ¯ç§‘æŠ€</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
        }

        h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .checksum-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .demo-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            padding: 20px;
            color: white;
        }

        .demo-card h3 {
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
        }

        .btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .result {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            min-height: 100px;
        }

        .steps {
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 10px;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .steps div {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .steps div:before {
            content: 'â–¶';
            position: absolute;
            left: 0;
        }

        /* å¥‡å¶æ ¡éªŒæ¸¸æˆæ ·å¼ */
        .game-container {
            text-align: center;
        }

        .game-controls {
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .game-info {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 20px;
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }

        .grid-container {
            display: inline-block;
            background: #f0f0f0;
            padding: 10px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(6, 60px);
            grid-template-rows: repeat(6, 60px);
            gap: 5px;
        }

        .cell {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
            border: 3px solid transparent;
        }

        .cell:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .cell.data {
            background: #333;
        }

        .cell.data.white {
            background: white;
        }

        .cell.parity {
            background-color: gold;
            position: relative;
            border: 3px solid transparent;
            transition: border-color 0.3s ease;
        }

        .cell.parity.correct {
            background-color: gold;
            border: 3px solid limegreen;
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0% { border-width: 3px; }
            50% { border-width: 5px; }
            100% { border-width: 3px; }
        }

        .cell.parity .inner-cell {
            width: 70%;
            height: 70%;
            background-color: black;
            margin: 15%;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        .cell.parity .inner-cell.white {
            background-color: white;
        }

        .cell.parity .check-mark {
            display: none;
        }

        .cell.parity .check-mark {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            color: #333;
            z-index: 2;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .cell.parity.correct .check-mark {
            opacity: 1; /* æ ¡éªŒæ­£ç¡®æ—¶æ˜¾ç¤ºâœ“ */
        }

        .cell.parity.correct {
            background: #43e97b;
        }

        .cell.selected {
            border-color: #f5576c;
            animation: pulse 0.5s ease-in-out;
        }

        .cell.changed {
            animation: flash 0.5s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .game-status {
            margin-top: 20px;
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            min-height: 30px;
        }

        .game-status.success {
            color: #43e97b;
            animation: bounce 0.5s ease-in-out;
        }

        .game-status.error {
            color: #f5576c;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .section {
                padding: 20px;
            }

            .grid {
                grid-template-columns: repeat(6, 45px);
                grid-template-rows: repeat(6, 45px);
            }

            .cell {
                width: 45px;
                height: 45px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ æ ¡éªŒç å­¦ä¹ å¹³å°</h1>

        <!-- æ ¡éªŒç ç”Ÿæˆæ¼”ç¤ºåŒº -->
        <div class="section">
            <h2>ğŸ“š æ ¡éªŒç ç”Ÿæˆæ¼”ç¤º</h2>
            <div class="checksum-demo">
                <!-- ISBNæ ¡éªŒç  -->
                <div class="demo-card">
                    <h3>ğŸ“– ISBNæ ¡éªŒç </h3>
                    <div class="input-group">
                        <label>è¾“å…¥å‰12ä½æ•°å­—:</label>
                        <input type="text" id="isbnInput" placeholder="ä¾‹å¦‚: 978730213589" maxlength="12">
                    </div>
                    <button class="btn" onclick="generateISBN()">ç”Ÿæˆæ ¡éªŒç </button>
                    <div class="result" id="isbnResult"></div>
                    <div class="steps" id="isbnSteps"></div>
                </div>

                <!-- å•†å“æ ¡éªŒç  -->
                <div class="demo-card">
                    <h3>ğŸ›’ å•†å“æ¡å½¢ç (EAN-13)</h3>
                    <div class="input-group">
                        <label>è¾“å…¥å‰12ä½æ•°å­—:</label>
                        <input type="text" id="eanInput" placeholder="ä¾‹å¦‚: 690123456789" maxlength="12">
                    </div>
                    <button class="btn" onclick="generateEAN()">ç”Ÿæˆæ ¡éªŒç </button>
                    <div class="result" id="eanResult"></div>
                    <div class="steps" id="eanSteps"></div>
                </div>

                <!-- èº«ä»½è¯æ ¡éªŒç  -->
                <div class="demo-card">
                    <h3>ğŸªª èº«ä»½è¯æ ¡éªŒç </h3>
                    <div class="input-group">
                        <label>è¾“å…¥å‰17ä½æ•°å­—:</label>
                        <input type="text" id="idInput" placeholder="ä¾‹å¦‚: 11010519900101234" maxlength="17">
                    </div>
                    <button class="btn" onclick="generateIDCard()">ç”Ÿæˆæ ¡éªŒç </button>
                    <div class="result" id="idResult"></div>
                    <div class="steps" id="idSteps"></div>
                </div>
            </div>
        </div>

        <!-- å¥‡å¶æ ¡éªŒæ¸¸æˆ -->
        <div class="section">
            <h2>ğŸ® å¥‡å¶æ ¡éªŒå°æ¸¸æˆ</h2>
            <div class="game-container">
                <div class="game-header">
                    <h1>å¥‡å¶æ ¡éªŒå­¦ä¹ </h1>
                    
                    <div class="instructions">
                        <h2>æ¸¸æˆè§„åˆ™:</h2>
                        <ol>
                            <li>é»„è‰²åŒºåŸŸæ˜¯æ ¡éªŒç åŒº(ä¹Ÿå¯ç‚¹å‡»åˆ‡æ¢é»‘ç™½)</li>
                            <li>ç‚¹å‡»ä»»æ„æ ¼å­åˆ‡æ¢å…¶é¢œè‰²(é»‘/ç™½)</li>
                            <li>ä½¿æ¯è¡Œå’Œæ¯åˆ—çš„ç™½è‰²æ ¼å­æ•°ä¸ºå¶æ•°ï¼Œæ ¡éªŒç ä¼šæ˜¾ç¤ºç»¿è‰²è¾¹æ¡†</li>
                            <li><strong>åªæœ‰å½“æ‰€æœ‰æ ¡éªŒç éƒ½æ˜¾ç¤ºç»¿è‰²è¾¹æ¡†æ—¶æ‰èƒ½å¼€å§‹æ¸¸æˆ</strong></li>
                            <li>ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‰é’®åï¼Œç³»ç»Ÿä¼šéšæœºç¿»è½¬ä¸€ä¸ªæ ¼å­</li>
                            <li>æ‰¾å‡ºè¢«ç¿»è½¬çš„æ ¼å­å³å¯å¾—åˆ†</li>
                        </ol>
                    </div>
                </div>
                
                <div class="game-controls">
                    <button class="btn" onclick="startGame()">ğŸ¯ å¼€å§‹æ¸¸æˆ</button>
                    <button class="btn" onclick="resetGame()">ğŸ”„ é‡ç½®</button>
                </div>
                <div class="game-info">
                    <div>â±ï¸ æ—¶é—´: <span id="timer">0</span>ç§’</div>
                    <div>ğŸ† å¾—åˆ†: <span id="score">0</span></div>
                    <div>âŒ é”™è¯¯: <span id="errors">0</span></div>
                </div>
                <div class="grid-container">
                    <div class="grid" id="gameGrid"></div>
                </div>
                <div class="game-status" id="gameStatus"></div>
            </div>
        </div>
    </div>

    <script>
        // ISBNæ ¡éªŒç ç”Ÿæˆ
        function generateISBN() {
            const input = document.getElementById('isbnInput').value;
            const resultDiv = document.getElementById('isbnResult');
            const stepsDiv = document.getElementById('isbnSteps');

            if (input.length !== 12 || !/^\d+$/.test(input)) {
                resultDiv.innerHTML = 'âŒ è¯·è¾“å…¥12ä½æ•°å­—';
                stepsDiv.innerHTML = '';
                return;
            }

            let sum = 0;
            let steps = '<div><strong>è®¡ç®—æ­¥éª¤:</strong></div>';

            for (let i = 0; i < 12; i++) {
                const digit = parseInt(input[i]);
                const weight = (i % 2 === 0) ? 1 : 3;
                sum += digit * weight;
                steps += `<div>ç¬¬${i+1}ä½: ${digit} Ã— ${weight} = ${digit * weight}</div>`;
            }

            steps += `<div><strong>æ€»å’Œ: ${sum}</strong></div>`;

            const checksum = (10 - (sum % 10)) % 10;
            steps += `<div>æ ¡éªŒç  = (10 - ${sum % 10}) % 10 = ${checksum}</div>`;

            resultDiv.innerHTML = `<strong>âœ… å®Œæ•´ISBN: ${input}${checksum}</strong>`;
            stepsDiv.innerHTML = steps;
        }

        // EAN-13æ ¡éªŒç ç”Ÿæˆ
        function generateEAN() {
            const input = document.getElementById('eanInput').value;
            const resultDiv = document.getElementById('eanResult');
            const stepsDiv = document.getElementById('eanSteps');

            if (input.length !== 12 || !/^\d+$/.test(input)) {
                resultDiv.innerHTML = 'âŒ è¯·è¾“å…¥12ä½æ•°å­—';
                stepsDiv.innerHTML = '';
                return;
            }

            let sum = 0;
            let steps = '<div><strong>è®¡ç®—æ­¥éª¤:</strong></div>';

            for (let i = 0; i < 12; i++) {
                const digit = parseInt(input[i]);
                const weight = (i % 2 === 0) ? 1 : 3;
                sum += digit * weight;
                steps += `<div>ç¬¬${i+1}ä½: ${digit} Ã— ${weight} = ${digit * weight}</div>`;
            }

            steps += `<div><strong>æ€»å’Œ: ${sum}</strong></div>`;

            const checksum = (10 - (sum % 10)) % 10;
            steps += `<div>æ ¡éªŒç  = (10 - ${sum % 10}) % 10 = ${checksum}</div>`;

            resultDiv.innerHTML = `<strong>âœ… å®Œæ•´æ¡å½¢ç : ${input}${checksum}</strong>`;
            stepsDiv.innerHTML = steps;
        }

        // èº«ä»½è¯æ ¡éªŒç ç”Ÿæˆ
        function generateIDCard() {
            const input = document.getElementById('idInput').value;
            const resultDiv = document.getElementById('idResult');
            const stepsDiv = document.getElementById('idSteps');

            if (input.length !== 17 || !/^\d+$/.test(input)) {
                resultDiv.innerHTML = 'âŒ è¯·è¾“å…¥17ä½æ•°å­—';
                stepsDiv.innerHTML = '';
                return;
            }

            const weights = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
            const checksums = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];

            let sum = 0;
            let steps = '<div><strong>è®¡ç®—æ­¥éª¤:</strong></div>';

            for (let i = 0; i < 17; i++) {
                const digit = parseInt(input[i]);
                sum += digit * weights[i];
                steps += `<div>ç¬¬${i+1}ä½: ${digit} Ã— ${weights[i]} = ${digit * weights[i]}</div>`;
            }

            steps += `<div><strong>æ€»å’Œ: ${sum}</strong></div>`;

            const remainder = sum % 11;
            const checksum = checksums[remainder];
            steps += `<div>ä½™æ•°: ${sum} Ã· 11 = ä½™${remainder}</div>`;
            steps += `<div>æ ¡éªŒç  = æŸ¥è¡¨å¾— '${checksum}'</div>`;

            resultDiv.innerHTML = `<strong>âœ… å®Œæ•´èº«ä»½è¯å·: ${input}${checksum}</strong>`;
            stepsDiv.innerHTML = steps;
        }

        // å¥‡å¶æ ¡éªŒæ¸¸æˆ
        let gameGrid = [];
        let gameActive = false;
        let changedCell = null;
        let timer = 0;
        let startTime = 0; // æ·»åŠ ç¼ºå¤±çš„startTimeå˜é‡
        let timerInterval = null;
        let score = 0;
        let errors = 0;

        function initGrid() {
            const grid = document.getElementById('gameGrid');
            grid.innerHTML = '';
            gameGrid = [];

            for (let row = 0; row < 6; row++) {
                gameGrid[row] = [];
                for (let col = 0; col < 6; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    
                    // åˆ¤æ–­æ˜¯æ•°æ®åŒºè¿˜æ˜¯æ ¡éªŒåŒº
                    const isParity = (row === 5 || col === 5);
                    
                    // éšæœºåˆå§‹åŒ–æ•°æ®åŒºä¸ºç™½è‰²æˆ–é»‘è‰²
                    let isWhite = false;
                    if (!isParity) {
                        isWhite = Math.random() < 0.5;
                    }
                    
                    gameGrid[row][col] = isWhite;
                    
                    if (isParity) {
                        cell.classList.add('parity');
                        // æ·»åŠ å†…éƒ¨æ ¼å­å…ƒç´ 
                        const innerCell = document.createElement('div');
                        innerCell.className = 'inner-cell';
                        if (isWhite) innerCell.classList.add('white');
                        cell.appendChild(innerCell);
                    } else {
                        cell.classList.add('data');
                        if (isWhite) cell.classList.add('white');
                    }
                    
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    // æ‰€æœ‰æ ¼å­éƒ½å¯ä»¥ç‚¹å‡»åˆ‡æ¢ï¼ˆåŒ…æ‹¬æ ¡éªŒç åŒºåŸŸï¼‰
                    cell.onclick = () => toggleCell(row, col);
                    
                    grid.appendChild(cell);
                }
            }
            
            updateParityCells();
        }

        function toggleCell(row, col) {
            // æ¸¸æˆè¿›è¡Œä¸­,ç‚¹å‡»æ˜¯ä¸ºäº†é€‰æ‹©ç­”æ¡ˆ
            if (gameActive && changedCell) {
                handleCellClick(row, col);
                return;
            }
            
            // éæ¸¸æˆçŠ¶æ€,å¯ä»¥è‡ªç”±åˆ‡æ¢æ ¼å­é¢œè‰²
            if (!gameActive) {
                gameGrid[row][col] = !gameGrid[row][col];
                const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                
                const isParity = (row === 5 || col === 5);
                
                if (isParity) {
                    // æ ¡éªŒç åŒºåŸŸ:åˆ‡æ¢å†…éƒ¨æ ¼å­çš„é¢œè‰²
                    const innerCell = cell.querySelector('.inner-cell');
                    if (gameGrid[row][col]) {
                        innerCell.classList.add('white');
                    } else {
                        innerCell.classList.remove('white');
                    }
                } else {
                    // æ•°æ®åŒºåŸŸ:ç›´æ¥åˆ‡æ¢é¢œè‰²
                    if (gameGrid[row][col]) {
                        cell.classList.add('white');
                    } else {
                        cell.classList.remove('white');
                    }
                }
                
                updateParityCells();
            }
        }

        function updateParityCells() {
            // è®¡ç®—æ¯è¡Œçš„ç™½è‰²æ ¼å­æ•°ï¼ˆåŒ…æ‹¬æ ¡éªŒç åŒºåŸŸï¼‰
            for (let row = 0; row < 5; row++) {
                let whiteCount = 0;
                for (let col = 0; col < 6; col++) {
                    if (gameGrid[row][col]) whiteCount++;
                }
                // å¦‚æœæ˜¯å¶æ•°ä¸ªç™½è‰²æ ¼å­ï¼Œåˆ™è¯¥è¡Œçš„æ ¡éªŒç å˜ä¸ºç»¿è‰²
                const parityCell = document.querySelector(`[data-row="${row}"][data-col="5"]`);
                if (whiteCount % 2 === 0) {
                    parityCell.classList.add('correct');
                } else {
                    parityCell.classList.remove('correct');
                }
            }

            // è®¡ç®—æ¯åˆ—çš„ç™½è‰²æ ¼å­æ•°ï¼ˆåŒ…æ‹¬æ ¡éªŒç åŒºåŸŸï¼‰
            for (let col = 0; col < 5; col++) {
                let whiteCount = 0;
                for (let row = 0; row < 6; row++) {
                    if (gameGrid[row][col]) whiteCount++;
                }
                // å¦‚æœæ˜¯å¶æ•°ä¸ªç™½è‰²æ ¼å­ï¼Œåˆ™è¯¥åˆ—çš„æ ¡éªŒç å˜ä¸ºç»¿è‰²
                const parityCell = document.querySelector(`[data-row="5"][data-col="${col}"]`);
                if (whiteCount % 2 === 0) {
                    parityCell.classList.add('correct');
                } else {
                    parityCell.classList.remove('correct');
                }
            }

            // è®¡ç®—æ•´ä¸ªç½‘æ ¼çš„ç™½è‰²æ ¼å­æ•°ï¼ˆåŒ…æ‹¬æ‰€æœ‰æ ¡éªŒç ï¼‰
            let totalWhite = 0;
            for (let row = 0; row < 6; row++) {
                for (let col = 0; col < 6; col++) {
                    if (gameGrid[row][col]) totalWhite++;
                }
            }
            // å³ä¸‹è§’æ ¡éªŒç ï¼šå¦‚æœæ€»æ•°æ˜¯å¶æ•°åˆ™å˜ä¸ºç»¿è‰²
            const cornerParityCell = document.querySelector(`[data-row="5"][data-col="5"]`);
            if (totalWhite % 2 === 0) {
                cornerParityCell.classList.add('correct');
            } else {
                cornerParityCell.classList.remove('correct');
            }

            // æ›´æ–°æ˜¾ç¤ºï¼ˆé™¤äº†æ ¡éªŒç åŒºåŸŸå¤–çš„æ•°æ®åŒºåŸŸï¼‰
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                const row = parseInt(cell.dataset.row);
                const col = parseInt(cell.dataset.col);
                const isDataArea = (row < 5 && col < 5);

                if (isDataArea) {
                    // æ•°æ®åŒºåŸŸ:æ ¹æ®gameGridå€¼æ˜¾ç¤ºé»‘ç™½
                    const isWhite = gameGrid[row][col];
                    if (isWhite) {
                        cell.classList.add('white');
                    } else {
                        cell.classList.remove('white');
                    }
                }
                // æ ¡éªŒç åŒºåŸŸå·²ç»åœ¨ä¸Šé¢å¤„ç†è¿‡äº†
            });
        }

        function startGame() {
            // æ£€æŸ¥æ‰€æœ‰æ ¡éªŒç æ˜¯å¦éƒ½æ­£ç¡®
            const parityCells = document.querySelectorAll('.cell.parity');
            let allCorrect = true;
            
            for (let i = 0; i < parityCells.length; i++) {
                if (!parityCells[i].classList.contains('correct')) {
                    allCorrect = false;
                    break;
                }
            }
            
            // å¦‚æœä¸æ˜¯æ‰€æœ‰æ ¡éªŒç éƒ½æ­£ç¡®ï¼Œä¸å¼€å§‹æ¸¸æˆ
            if (!allCorrect) {
                alert('è¯·å…ˆç¡®ä¿æ‰€æœ‰æ ¡éªŒç éƒ½æ­£ç¡®ï¼ˆæ˜¾ç¤ºç»¿è‰²è¾¹æ¡†ï¼‰å†å¼€å§‹æ¸¸æˆï¼');
                return;
            }
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameActive = true;
            startTime = Date.now();
            score = 0;
            errors = 0;
            changedCell = null;
            timer = 0;
            
            // æ›´æ–°UI
            document.getElementById('score').textContent = score;
            document.getElementById('errors').textContent = errors;
            document.getElementById('timer').textContent = timer;
            
            // å¯åŠ¨è®¡æ—¶å™¨
            clearInterval(timerInterval); // å…ˆæ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            timerInterval = setInterval(() => {
                timer++;
                document.getElementById('timer').textContent = timer;
            }, 1000);
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªæ•°æ®æ ¼å­è¿›è¡Œç¿»è½¬
            const row = Math.floor(Math.random() * 5);
            const col = Math.floor(Math.random() * 5);
            
            // ç¿»è½¬æ ¼å­
            gameGrid[row][col] = !gameGrid[row][col];
            changedCell = {row, col};
            
            // æ›´æ–°æ˜¾ç¤º
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if (gameGrid[row][col]) {
                cell.classList.add('white');
            } else {
                cell.classList.remove('white');
            }
            
            // æ›´æ–°æ ¡éªŒç 
            updateParityCells();
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€ä¿¡æ¯
            document.getElementById('gameStatus').textContent = 'ä¸€ä¸ªæ ¼å­è¢«æ”¹å˜äº†!è¯·æ‰¾å‡ºå®ƒ!';
            document.getElementById('gameStatus').className = 'game-status';
        }

        function handleCellClick(row, col) {
            if (!gameActive || !changedCell) return;

            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            
            if (row === changedCell.row && col === changedCell.col) {
                // ç­”å¯¹äº†
                cell.classList.add('selected');
                clearInterval(timerInterval);
                score += Math.max(10 - timer, 1);
                document.getElementById('score').textContent = score;
                document.getElementById('gameStatus').textContent = 'ğŸ‰ å¤ªæ£’äº†!æ‰¾å¯¹äº†!';
                document.getElementById('gameStatus').className = 'game-status success';
                gameActive = false;
                changedCell = null;
            } else {
                // ç­”é”™äº†
                errors++;
                document.getElementById('errors').textContent = errors;
                document.getElementById('gameStatus').textContent = 'âŒ ä¸å¯¹å“¦,å†è¯•è¯•!';
                document.getElementById('gameStatus').className = 'game-status error';
                setTimeout(() => {
                    document.getElementById('gameStatus').textContent = 'ç»§ç»­å¯»æ‰¾è¢«æ”¹å˜çš„æ ¼å­!';
                    document.getElementById('gameStatus').className = 'game-status';
                }, 1000);
            }
        }

        function resetGame() {
            gameActive = false;
            changedCell = null;
            clearInterval(timerInterval);
            timer = 0;
            score = 0;
            errors = 0;
            document.getElementById('timer').textContent = '0';
            document.getElementById('score').textContent = '0';
            document.getElementById('errors').textContent = '0';
            document.getElementById('gameStatus').textContent = '';
            document.getElementById('gameStatus').className = 'game-status';
            initGrid();
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        initGrid();
    </script>
</body>
</html>